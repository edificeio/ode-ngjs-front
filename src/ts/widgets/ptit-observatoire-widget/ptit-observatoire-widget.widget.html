<style>
  .ptit-observatoire-widget-container {
    box-sizing: border-box;
    background: #358284;
    padding: 10px;
    border-radius: 6px;
    overflow: hidden;
  }

  .ptit-observatoire-widget-content {
    display: flex;
    flex-direction: column;
    gap: 10px;
    box-sizing: border-box;
    width: 100%;
    height: 100%;
    background-color: #FFF;
    border-radius: 3px;
    padding: 10px;
  }

  .ptit-observatoire-widget-form {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .ptit-observatoire-widget-select {
    background-color: #fff;
    padding: 15px;
    border: 1px solid #c1c1ca;
    color: #c1c1ca;
    border-radius: 10px;
  }

  .ptit-observatoire-submit-button {
    display: flex;
    align-items: center;
    gap: 10px;
    background-color: #173a37;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 30px;
  }

  .ptit-observatoire-plus-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 100%;
    text-align: center;
    background-color: #2c6262;
    border-radius: 50%;
    width: 30px;
    height: 30px;
  }

  .ptit-observatoire-modal-form {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .ptit-observatoire-modal-form-legend {
    text-transform: uppercase;
    color: #7caaac;
    font-weight: bold;
  }

  .ptit-observatoire-modal-form-textarea {
    width: 100%;
  }

  .ptit-observatoire-modal-options-container {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
  }
</style>


<div class="ptit-observatoire-widget-container">
  <div class="ptit-observatoire-widget-content">
    <p>
      <i18n>ptitObservatoire.title</i18n>
    </p>
    <div class="widget-body" dnd-nodrag>
      <form class="ptit-observatoire-widget-form" ng-submit="ctrl.startObservation()">
        <select class="ptit-observatoire-widget-select" name="student" ng-model="ctrl.formData.student_id">
          <option value="" selected>
          </option>
          <option ng-repeat="student in ctrl.studentsList" value="{{student.id}}">
            {{student.fullName}}
          </option>
        </select>
        <button type="submit" class="ptit-observatoire-submit-button">
          <span class="ptit-observatoire-plus-icon">+</span>
          <span>
            <i18n>ptitObservatoire.newObservation</i18n>
          </span>
        </button>
      </form>
      </div>
  </div>

  <!-- MODAL -->

  <ode-modal visible="ctrl.showLightbox" on-close="ctrl.showLightbox=false" size="lg" dnd-nodrag>
    <ode-modal-title>
      <h2>
        <i18n>ptitObservatoire.modal.title</i18n>
      </h2>
    </ode-modal-title>

    <ode-modal-body>


      <form class="ptit-observatoire-modal-form" ng-submit="ctrl.handleObservationSubmit(); ctrl.showLightbox=false">

        <!-- OBSERVATION -->
        <fieldset>
          <legend class="ptit-observatoire-modal-form-legend">
            <i18n>ptitObservatoire.modal.observation</i18n>
          </legend>
          <textarea class="ptit-observatoire-modal-form-textarea" name="content" ng-model="ctrl.formData['content']"
            i18n-placeholder="ptitObservatoire.modal.textarea.placeholder"></textarea>
        </fieldset>

        <!-- EVALUATION -->
        <fieldset>
          <legend class="ptit-observatoire-modal-form-legend">
            <i18n>ptitObservatoire.modal.evaluation</i18n>
          </legend>

          <label for="strengths">
            <input type="radio" id="strength" name="assessment_type" ng-model="ctrl.formData['assessment_type']"
              ng-value="'strength'" />
            <i18n>ptitObservatoire.modal.evaluation.strength</i18n>
          </label>

          <label for="neutral">
            <input type="radio" id="neutral" name="assessment_type" ng-model="ctrl.formData['assessment_type']"
              ng-value="'neutral'" />
            <i18n>ptitObservatoire.modal.evaluation.neutral</i18n>
          </label>

          <label for="difficulties">
            <input type="radio" id="difficulties" name="assessment_type" ng-model="ctrl.formData['assessment_type']"
              ng-value="'difficulties'" />
            <i18n>ptitObservatoire.modal.evaluation.difficulties</i18n>
          </label>
        </fieldset>

        <!-- CATEGORIES -->
        <fieldset>
          <legend class="ptit-observatoire-modal-form-legend">
            <i18n>ptitObservatoire.modal.categories</i18n>
          </legend>

          <div class="ptit-observatoire-modal-options-container">
            <label ng-repeat="category in ctrl.observationCategories">
              <input type="radio" name="{{category.name}}" ng-model="ctrl.formData['category_id']"
                ng-value="category.id" />
              {{ category.name }}
            </label>
          </div>
        </fieldset>

        <!-- PRIVATE -->
        <fieldset>
          <legend class="ptit-observatoire-modal-form-legend">
            <i18n>ptitObservatoire.modal.options</i18n>
          </legend>
          <label>
            <input type="checkbox" ng-model="ctrl.formData['private']" />
            <i18n>ptitObservatoire.modal.options.private</i18n>
          </label>
        </fieldset>

        <button type="submit" class="ptit-observatoire-submit-button">
          <i18n>ptitObservatoire.modal.save</i18n>
        </button>

      </form>
    </ode-modal-body>
  </ode-modal>
</div>